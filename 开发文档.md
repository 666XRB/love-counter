è¿™æ˜¯ä¸€ä¸ªéå¸¸ç§äººä¸”å……æ»¡åˆ›æ„çš„ç‚¹å­ã€‚å°† Github Pages ç”¨äºè¿™ç±»è®°å½•éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒå…è´¹ä¸”ç¨³å®šã€‚

ä¸ºäº†å®ç°ä½ çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯**â€œä¸åŒè®¾å¤‡åŒæ­¥æ•°æ®â€**è¿™ä¸€æ ¸å¿ƒéš¾ç‚¹ï¼Œç”±äº Github Pages åªæ˜¯é™æ€æ‰˜ç®¡ï¼ˆæ²¡æœ‰åç«¯æ•°æ®åº“ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ **Supabase** æˆ– **LeanCloud** è¿™æ ·çš„å…è´¹äº‘æ•°æ®åº“æœåŠ¡ï¼Œæˆ–è€…åˆ©ç”¨ **WebDAV** æŒ‚è½½åšæœäº‘ç­‰ã€‚

è€ƒè™‘åˆ°å¼€å‘éš¾åº¦å’Œ UI ç¾æ„Ÿï¼Œæˆ‘å»ºè®®ä½¿ç”¨ **Next.js (æˆ– Vite + React) + Tailwind CSS + Lucide Icons**ã€‚

---

## ğŸ›  å¼€å‘æ–‡æ¡£ï¼šçˆ±è®¡æ•° (Love Counter)

### 1. æŠ€æœ¯æ ˆé€‰æ‹©

* **å‰ç«¯æ¡†æ¶**: React.js (Vite æ„å»ºï¼Œè½»é‡é«˜æ•ˆ)
* **æ ·å¼åº“**: Tailwind CSS + Shadcn UI (æ¨¡æ‹Ÿ Windows 11 çš„äºšå…‹åŠ›/äº‘æ¯è´¨æ„Ÿ)
* **æ•°æ®åŒæ­¥**: Supabase (å…è´¹å±‚çº§è¶³å¤Ÿï¼Œæä¾›å®æ—¶æ•°æ®åº“ï¼Œè§£å†³å¤šè®¾å¤‡åŒæ­¥é—®é¢˜)
* **å¯¼å‡ºåŠŸèƒ½**: jsPDF + html2canvas
* **éƒ¨ç½²**: GitHub Pages

### 2. æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

* **çƒ­åŠ›å›¾æ—¥å†**: ä»¿ GitHub è´¡çŒ®å›¾ï¼Œæ€§çˆ±é¢‘ç‡è¶Šé«˜ï¼Œé¢œè‰²è¶Šæ·±ï¼ˆä»æµ…ç²‰åˆ°æ·±ç´«ï¼‰ã€‚
* **æç®€å¼¹çª—**: ç‚¹å‡»æ—¥æœŸå³å¯å¿«é€Ÿè®°å½•ï¼ˆæ—¶é—´ã€æŒç»­æ—¶é—´ã€äº”æ˜Ÿæ»¡æ„åº¦ï¼‰ã€‚
* **æ•°æ®çœ‹æ¿**: å±•ç¤ºâ€œå¹´åº¦æ€»æ¬¡æ•°â€ã€â€œæœ¬æœˆé¢‘ç‡â€ã€â€œæœ€é«˜çºªå½•â€ç­‰ç»Ÿè®¡æ•°æ®ã€‚
* **åŒæ­¥æœºåˆ¶**: ä½¿ç”¨ç»Ÿä¸€çš„æŸ¥è¯¢å‚æ•°æˆ–ç®€å•çš„â€œæˆ¿é—´å·/å¯†ç â€ç™»å½•æ¥åŒæ­¥ Supabase é‡Œçš„æ•°æ®ã€‚

---

## ğŸ’» æ ¸å¿ƒä»£ç å®ç°

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“ç»“æ„ (Supabase)

åœ¨ Supabase ä¸­åˆ›å»ºä¸€ä¸ª `records` è¡¨ï¼š

* `id`: uuid
* `created_at`: timestamp
* `rating`: integer (1-5)
* `note`: text
* `user_id`: string (ç”¨äºä½ å’Œä½ å¥³æœ‹å‹å…±äº«çš„å”¯ä¸€æ ‡è¯†)

### ç¬¬äºŒæ­¥ï¼šæ ¸å¿ƒé€»è¾‘ç»„ä»¶ (React + Tailwind)

```jsx
import React, { useState, useEffect } from 'react';
import { Calendar } from '@/components/ui/calendar'; // ä½¿ç”¨ shadcn ç»„ä»¶
import { createClient } from '@supabase/supabase-js';
import { LineChart, Line, XAxis, Tooltip, ResponsiveContainer } from 'recharts';
import { Heart, Download, Share2 } from 'lucide-react';

const supabase = createClient('YOUR_SUPABASE_URL', 'YOUR_SUPABASE_ANON_KEY');

export default function LoveCounter() {
  const [date, setDate] = useState(new Date());
  const [records, setRecords] = useState([]);

  // è·å–æ•°æ®
  useEffect(() => {
    fetchRecords();
  }, []);

  const fetchRecords = async () => {
    const { data } = await supabase.from('records').select('*');
    setRecords(data);
  };

  // è®°å½•ä¸€æ¬¡çˆ±çˆ±
  const addRecord = async (rating) => {
    const newRecord = {
      date: date.toISOString(),
      rating: rating,
      pair_id: 'our-secret-id' // ä½ ä»¬å…±åŒçš„ID
    };
    await supabase.from('records').insert([newRecord]);
    fetchRecords();
  };

  // è®¡ç®—é¢œè‰²æ·±åº¦é€»è¾‘
  const getDayColor = (day) => {
    const count = records.filter(r => isSameDay(r.date, day)).length;
    if (count === 0) return 'bg-slate-100';
    if (count === 1) return 'bg-pink-200';
    if (count === 2) return 'bg-pink-400';
    return 'bg-pink-600'; // æ¬¡æ•°è¶Šå¤šé¢œè‰²è¶Šæ·±
  };

  return (
    <div className="min-h-screen bg-[#F3F3F3] p-4 md:p-8 font-sans text-slate-800">
      {/* Windows 11 é£æ ¼å¡ç‰‡ */}
      <div className="max-w-4xl mx-auto bg-white/80 backdrop-blur-md rounded-2xl shadow-xl border border-white p-6">
        <header className="flex justify-between items-center mb-8">
          <h1 className="text-2xl font-bold flex items-center gap-2">
            <Heart className="text-pink-500 fill-pink-500" /> çˆ±è®¡æ•°
          </h1>
          <button className="p-2 hover:bg-slate-100 rounded-full transition" onClick={exportPDF}>
            <Download size={20} />
          </button>
        </header>

        <div className="grid md:grid-cols-2 gap-8">
          {/* æ—¥å†éƒ¨åˆ† */}
          <section>
            <Calendar
              mode="single"
              selected={date}
              onSelect={setDate}
              className="rounded-md border shadow-sm"
            />
          </section>

          {/* ç»Ÿè®¡éƒ¨åˆ† */}
          <section className="space-y-6">
            <div className="bg-gradient-to-br from-pink-50 to-orange-50 p-6 rounded-xl border border-pink-100">
              <p className="text-sm text-slate-500">æœ¬æœˆç”œèœœæ¬¡æ•°</p>
              <h2 className="text-4xl font-black text-pink-600">24 æ¬¡</h2>
            </div>
            
            {/* å¿«é€Ÿæ‰“åˆ†è®°å½• */}
            <div className="space-y-3">
              <p className="font-medium">è®°å½•ä»Šå¤©çš„äº²å¯†ç¬é—´ï¼š</p>
              <div className="flex gap-2">
                {[1, 2, 3, 4, 5].map(num => (
                  <button 
                    key={num}
                    onClick={() => addRecord(num)}
                    className="flex-1 py-2 rounded-lg bg-white border border-slate-200 hover:border-pink-400 hover:text-pink-500 transition"
                  >
                    {num} â­
                  </button>
                ))}
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  );
}

```

---

## ğŸ¨ UI & äº¤äº’ç»†èŠ‚è¯´æ˜

1. **Windows 11 è§†è§‰è¯­è¨€**:
* **èƒŒæ™¯**: ä½¿ç”¨æ·¡ç°è‰²ï¼ˆ#F3F3F3ï¼‰æˆ–å¾®è½¯çš„ Mica æè´¨èƒŒæ™¯å›¾ã€‚
* **åœ†è§’**: å®¹å™¨ä½¿ç”¨ `rounded-2xl` (16px)ï¼Œå°æŒ‰é’®ä½¿ç”¨ `rounded-lg` (8px)ã€‚
* **æ¨¡ç³Šæ•ˆæœ**: ä½¿ç”¨ CSS `backdrop-filter: blur(20px);` å®ç°æ¯›ç»ç’ƒè´¨æ„Ÿï¼Œè¿™ä¼šè®©é¡µé¢çœ‹èµ·æ¥éå¸¸é«˜çº§ã€‚


2. **æ•°æ®åŒæ­¥åŸç†**:
* æ—¢ç„¶æ˜¯é™æ€é¡µé¢ï¼Œä½ å¯ä»¥ç»™å¥³æœ‹å‹å‘é€ä¸€ä¸ªå¸¦å‚æ•°çš„é“¾æ¥ï¼Œä¾‹å¦‚ `https://yourname.github.io/love-counter?pair_id=xxxx`ã€‚
* ä»£ç é€»è¾‘ä¼šè‡ªåŠ¨è¯†åˆ« `pair_id`ï¼Œä»æ•°æ®åº“è°ƒå–å±äºä½ ä»¬ä¸¤äººçš„å…±åŒè®°å½•ã€‚


3. **PDF æŠ¥å‘Š**:
* ä½¿ç”¨ `jsPDF` æ•æ‰é¡µé¢ä¸­éšè—çš„ä¸€ä¸ªâ€œæŠ¥å‘Šæ¨¡ç‰ˆâ€ divï¼Œç”ŸæˆåŒ…å«ï¼š**æœ¬æœˆè¶‹åŠ¿å›¾è¡¨**ã€**è¯„ä»·åˆ†å¸ƒæŸ±çŠ¶å›¾**ã€**æœ€é¢‘ç¹æ—¶é—´æ®µ**ç­‰æ•°æ®çš„ç²¾ç¾ PDFã€‚



---

æ—¢ç„¶ä½ æä¾›äº† LeanCloud çš„å‡­è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ **LeanCloud å­˜å‚¨ SDK** æ¥å¤„ç†æ•°æ®ã€‚è¿™å¯¹äºé™æ€é¡µé¢ï¼ˆGitHub Pagesï¼‰æ¥è¯´æ˜¯å®Œç¾çš„æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒä¸éœ€è¦ä½ ç»´æŠ¤æœåŠ¡å™¨ï¼Œä¸”åœ¨ä¸­å›½è®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚

ä»¥ä¸‹æ˜¯â€œçˆ±è®¡æ•° (Love Counter)â€é¡¹ç›®çš„å®Œæ•´å¼€å‘ç»†èŠ‚ã€æ ¸å¿ƒä»£ç ä»¥åŠ Windows 11 é£æ ¼çš„å®ç°æ–¹æ¡ˆã€‚

---

### ä¸€ã€ é¡¹ç›®ç»“æ„ä¸å¼€å‘ç¯å¢ƒ

1. **æŠ€æœ¯é€‰å‹**:
* **æ¡†æ¶**: React (ä½¿ç”¨ Vite å¿«é€Ÿæ„å»º)
* **æ ·å¼**: Tailwind CSS (ç”¨äºå®ç°é«˜çº§ UI)
* **æ•°æ®åº“**: LeanCloud (ç»“æ„åŒ–æ•°æ®å­˜å‚¨)
* **æŠ¥è¡¨å¯¼å‡º**: `html2canvas` + `jspdf`


2. **å®‰è£…ä¾èµ–**:
```bash
npm install leancloud-storage lucide-react html2canvas jspdf date-fns

```



---

### äºŒã€ æ ¸å¿ƒæ•°æ®åº“é…ç½® (`src/db.js`)

æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º `Heartbeat` çš„ Class ä¸­ã€‚

```javascript
import AV from 'leancloud-storage';

AV.init({
  appId: "fXnYOxrBJqYINPMyp49sG3Sh-gzGzoHsz",
  appKey: "4VGgTvlU2vWsdjK4QxM9ArcB",
  serverURL: "https://fxnyoxrb.lc-cn-n1-shared.com"
});

export const LoveRecord = AV.Object.extend('LoveRecord');
export default AV;

```

---

### ä¸‰ã€ æ ¸å¿ƒé€»è¾‘ä¸ UI å®ç° (`App.jsx`)

è¿™æ®µä»£ç é›†æˆäº† **Windows 11 äºšå…‹åŠ›è´¨æ„Ÿ**ã€**æ—¥å†çƒ­åŠ›å›¾é€»è¾‘**ã€**æ•°æ®åŒæ­¥**ä»¥åŠ**å¯¼å‡ºåŠŸèƒ½**ã€‚

```jsx
import React, { useState, useEffect, useRef } from 'react';
import AV, { LoveRecord } from './db';
import { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameDay } from 'date-fns';
import { Heart, Download, Plus, Star, BarChart3 } from 'lucide-react';
import html2canvas from 'html2canvas';
import jsPDF from 'jspdf';

export default function App() {
  const [records, setRecords] = useState([]);
  const [loading, setLoading] = useState(true);
  const reportRef = useRef();

  // 1. åˆå§‹åŒ–å¹¶æ‹‰å–äº‘ç«¯æ•°æ® (å®æ—¶åŒæ­¥)
  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    const query = new AV.Query('LoveRecord');
    query.limit(1000); // è·å–æœ€è¿‘è®°å½•
    const results = await query.find();
    setRecords(results.map(r => ({
      id: r.id,
      date: new Date(r.get('date')),
      rating: r.get('rating'),
      note: r.get('note')
    })));
    setLoading(false);
  };

  // 2. æ ¸å¿ƒåŠŸèƒ½ï¼šæ·»åŠ è®°å½•
  const addLoveRecord = async (rating) => {
    const record = new LoveRecord();
    record.set('date', new Date()); // å½“å‰æ—¶é—´
    record.set('rating', rating);
    await record.save();
    fetchData(); // é‡æ–°åŠ è½½å®ç°åŒæ­¥
    alert('è®°å½•æˆåŠŸï¼â¤ï¸');
  };

  // 3. è®¡ç®—æ—¥å†é¢œè‰²æ·±åº¦ (Windows é£æ ¼çƒ­åŠ›å›¾)
  const getIntensityClass = (day) => {
    const count = records.filter(r => isSameDay(r.date, day)).length;
    if (count === 0) return 'bg-white/40'; 
    if (count === 1) return 'bg-pink-200 border-pink-300';
    if (count === 2) return 'bg-pink-400 border-pink-500 text-white';
    return 'bg-pink-600 border-pink-700 text-white shadow-lg shadow-pink-200';
  };

  // 4. å¯¼å‡º PDF æŠ¥è¡¨
  const exportPDF = () => {
    const input = reportRef.current;
    html2canvas(input).then((canvas) => {
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jsPDF('p', 'mm', 'a4');
      pdf.addImage(imgData, 'PNG', 10, 10, 190, 0);
      pdf.save("çˆ±è®¡æ•°-å¹´åº¦æŠ¥å‘Š.pdf");
    });
  };

  return (
    <div className="min-h-screen bg-[#f0f2f5] text-slate-800 p-4 md:p-10 font-sans selection:bg-pink-200">
      {/* ç£¨ç ‚ç»ç’ƒå®¹å™¨ */}
      <div ref={reportRef} className="max-w-5xl mx-auto bg-white/70 backdrop-blur-xl rounded-[24px] shadow-2xl border border-white/50 overflow-hidden">
        
        {/* Header - Windows 11 Style */}
        <nav className="p-6 border-b border-gray-200/50 flex justify-between items-center">
          <div>
            <h1 className="text-2xl font-bold flex items-center gap-2 tracking-tight">
              <Heart className="fill-pink-500 text-pink-500 animate-pulse" /> 
              HYJâ¤ï¸XRBã®â¤ï¸è®¡æ•° <span className="text-sm font-normal text-slate-400">v1.0</span>
            </h1>
          </div>
          <button onClick={exportPDF} className="flex items-center gap-2 px-4 py-2 bg-white/80 hover:bg-pink-50 rounded-full border border-gray-200 transition-all active:scale-95 shadow-sm">
            <Download size={18} /> å¯¼å‡º PDF æŠ¥å‘Š
          </button>
        </nav>

        <div className="grid lg:grid-cols-3 gap-0">
          {/* å·¦ä¾§ï¼šæ—¥å†é¢æ¿ */}
          <div className="lg:col-span-2 p-8 border-r border-gray-100">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-xl font-semibold">å¹´åº¦ç”œèœœå›¾è°±</h2>
              <div className="flex gap-2 text-xs items-center text-slate-400">
                Less <div className="w-3 h-3 bg-white/40 border"></div>
                <div className="w-3 h-3 bg-pink-200"></div>
                <div className="w-3 h-3 bg-pink-400"></div>
                <div className="w-3 h-3 bg-pink-600"></div> More
              </div>
            </div>

            {/* æ¨¡æ‹Ÿçƒ­åŠ›å›¾æ—¥å† */}
            <div className="grid grid-cols-7 gap-2">
              {eachDayOfInterval({
                start: startOfMonth(new Date()),
                end: endOfMonth(new Date())
              }).map(day => (
                <div key={day.toString()} className={`aspect-square rounded-lg border flex flex-col items-center justify-center transition-all ${getIntensityClass(day)}`}>
                  <span className="text-xs opacity-60">{format(day, 'd')}</span>
                  {records.filter(r => isSameDay(r.date, day)).length > 0 && <Heart size={10} className="mt-1 fill-current"/>}
                </div>
              ))}
            </div>
          </div>

          {/* å³ä¾§ï¼šæ“ä½œä¸ç»Ÿè®¡ */}
          <div className="p-8 bg-gray-50/30 space-y-8">
            <section className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
              <h3 className="text-sm font-medium text-slate-500 mb-4 flex items-center gap-2">
                <Plus size={16}/> å¿«é€Ÿè®°å½•
              </h3>
              <div className="flex flex-wrap gap-3">
                {[1, 2, 3, 4, 5].map(score => (
                  <button 
                    key={score}
                    onClick={() => addLoveRecord(score)}
                    className="w-10 h-10 rounded-full border border-pink-100 flex items-center justify-center hover:bg-pink-500 hover:text-white transition-all hover:scale-110 active:scale-90"
                  >
                    {score}
                  </button>
                ))}
              </div>
              <p className="mt-4 text-[10px] text-slate-400 text-center italic">ç‚¹å‡»åˆ†å€¼ï¼ˆ1-5æ˜Ÿï¼‰ç«‹å³å­˜å…¥äº‘ç«¯</p>
            </section>

            <section className="space-y-4">
              <h3 className="text-sm font-medium text-slate-500 flex items-center gap-2">
                <BarChart3 size={16}/> æ•°æ®æ´å¯Ÿ
              </h3>
              <div className="grid grid-cols-2 gap-4">
                <div className="bg-white p-4 rounded-xl border border-gray-100 text-center">
                  <div className="text-2xl font-bold text-pink-500">{records.length}</div>
                  <div className="text-[10px] uppercase tracking-wider text-slate-400">ç´¯è®¡æ¬¡æ•°</div>
                </div>
                <div className="bg-white p-4 rounded-xl border border-gray-100 text-center">
                  <div className="text-2xl font-bold text-orange-400">
                    {(records.reduce((acc, curr) => acc + curr.rating, 0) / (records.length || 1)).toFixed(1)}
                  </div>
                  <div className="text-[10px] uppercase tracking-wider text-slate-400">å¹³å‡æŒ‡æ•°</div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>
  );
}

```

---

### å››ã€ å¼€å‘ä¸éƒ¨ç½²ç»†èŠ‚è¯´æ˜

#### 1. æ•°æ®åŒæ­¥ï¼ˆå¦‚ä½•è®©ä½ å¥³æœ‹å‹çœ‹åˆ°ä¸€æ ·çš„ï¼‰

å› ä¸ºä½ åœ¨ä»£ç ä¸­é…ç½®äº†ç›¸åŒçš„ `AppID` å’Œ `AppKey`ï¼ŒLeanCloud ä¼šæŒ‡å‘åŒä¸€ä¸ªæ•°æ®åº“ã€‚

* **åŒæ­¥é€»è¾‘**ï¼šæ¯å½“ä½ ç‚¹å‡»è®°å½•ï¼Œæ•°æ®ä¼šä¸Šä¼ åˆ°äº‘ç«¯ã€‚ä½ å¥³æœ‹å‹åˆ·æ–°é¡µé¢ï¼ˆæˆ–è€…åœ¨ä»£ç ä¸­åŠ å…¥ `setInterval` å®šæ—¶è½®è¯¢ï¼‰ï¼Œå°±ä¼šè°ƒç”¨ `fetchData()` è·å–æœ€æ–°çš„æ•°æ®ã€‚
* **å¤šè®¾å¤‡æ”¯æŒ**ï¼šè¯¥ UI é‡‡ç”¨ Tailwind å“åº”å¼è®¾è®¡ï¼Œåœ¨æ‰‹æœºä¸Šä¼šè‡ªåŠ¨å˜ä¸ºå•åˆ—å¸ƒå±€ï¼Œæ–¹ä¾¿éšæ—¶éšåœ°åœ¨åºŠå¤´è®°å½•ã€‚

#### 2. UI é«˜çº§æ„Ÿå¤„ç†

* **äºšå…‹åŠ›æ•ˆæœ**ï¼šä½¿ç”¨äº† `backdrop-blur-xl` å’Œ `bg-white/70`ã€‚è¿™ä¼šè®©èƒŒæ™¯é€å‡ºä¸€ç§æœ¦èƒ§æ„Ÿï¼Œéå¸¸ç¬¦åˆ Windows 11 çš„è§†è§‰æ ‡å‡†ã€‚
* **é¢œè‰²é˜¶æ¢¯**ï¼šæ—¥å†æ ¼å­ä¼šæ ¹æ®å½“å¤© `records.length` çš„å¤šå°‘æ”¹å˜é¢œè‰²ï¼Œæ¬¡æ•°è¶Šå¤šï¼Œç²‰è‰²è¶Šæ·±ã€‚

#### 3. éƒ¨ç½²åˆ° GitHub Pages

1. åœ¨ `package.json` ä¸­æ·»åŠ  `"homepage": "https://<your-username>.github.io/love-counter"`ã€‚
2. è¿è¡Œå‘½ä»¤ï¼š
```bash
npm run build
npm run deploy

```


(éœ€è¦å…ˆå®‰è£… `gh-pages` æ’ä»¶)ã€‚

#### 4. å®‰å…¨å»ºè®® (é‡è¦)

å› ä¸ºä½ æ˜¯é™æ€éƒ¨ç½²ï¼ŒMasterKey **ç»å¯¹ä¸è¦** å†™åœ¨å‰ç«¯ä»£ç é‡Œã€‚ä¸Šé¢çš„ä»£ç åªä½¿ç”¨äº† `AppKey`ï¼Œè¿™åœ¨ LeanCloud ä¸­æ˜¯å®‰å…¨çš„ï¼ˆå— ACL é™åˆ¶ï¼‰ã€‚å»ºè®®ä½ åœ¨ LeanCloud æ§åˆ¶å°å¼€å¯ **â€œä»…åˆ›å»ºè€…å¯å†™â€** æˆ–è€…ç®€å•çš„æƒé™è®¾ç½®ï¼Œé˜²æ­¢å¤–äººæ¶æ„æ³¨å…¥æ•°æ®ã€‚

ä¸ºäº†ç¡®ä¿ä½ èƒ½å¤Ÿä»é›¶å¼€å§‹ã€ç›´æ¥é€šè¿‡ GitHub Pages æˆåŠŸéƒ¨ç½²å¹¶è®©ä¸¤äººåŒæ­¥ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»†èŠ‚ä¸Šåšåˆ°â€œå¼€ç®±å³ç”¨â€ã€‚

ä»¥ä¸‹æ˜¯ä¸ºä½ å®Œå–„çš„**ä¿å§†çº§å¼€å‘æ–‡æ¡£**ï¼ŒåŒ…å«é¡¹ç›®åˆå§‹åŒ–ã€ç¯å¢ƒé¿å‘æŒ‡å—ä»¥åŠå¢å¼ºç‰ˆçš„å¯¼å‡ºä¸ UI é€»è¾‘ã€‚

---

## ğŸ“– â€œçˆ±è®¡æ•°â€é¡¹ç›®å®Œæ•´å¼€å‘æ–‡æ¡£

### 1. å‡†å¤‡å·¥ä½œ (ç¯å¢ƒæ­å»º)

åœ¨ä½ çš„æœ¬åœ°æœºå™¨ä¸Šï¼ˆç¡®ä¿å·²å®‰è£… Node.jsï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºé¡¹ç›®ï¼š

```bash
# åˆ›å»º Vite + React é¡¹ç›®
npm create vite@latest love-counter -- --template react

# è¿›å…¥ç›®å½•
cd love-counter

# å®‰è£…å¿…è¦ä¾èµ–
npm install leancloud-storage lucide-react date-fns html2canvas jspdf
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

```

### 2. æ•°æ®åº“é…ç½® (LeanCloud å®‰å…¨æ€§)

åœ¨ LeanCloud æ§åˆ¶å°ï¼Œè¯·åŠ¡å¿…è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **åˆ›å»º Class**: è¿›å…¥å­˜å‚¨ -> ç»“æ„åŒ–æ•°æ®ï¼Œæ–°å»ºä¸€ä¸ªåä¸º `LoveRecord` çš„ Classã€‚
2. **æƒé™è®¾ç½®**: å°† `LoveRecord` çš„æƒé™è®¾ç½®ä¸ºâ€œæ‰€æœ‰ç”¨æˆ·å¯è¯»ã€å¯å†™â€ã€‚ï¼ˆç”±äºæ˜¯é™æ€ç§å¯†åº”ç”¨ï¼Œè¿™æ ·æœ€ç®€å•ï¼›åæœŸä½ å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªå›ºå®šçš„ `user_id` æ¥è¿‡æ»¤æ•°æ®ï¼‰ã€‚

### 3. æ ¸å¿ƒä»£ç å®Œå–„ (`src/App.jsx`)

æˆ‘ä»¬éœ€è¦åŠ å…¥**å®æ—¶è‡ªåŠ¨åˆ·æ–°**å’Œ**æ›´ç»†è…»çš„ Windows 11 UI æ•ˆæœ**ã€‚

```jsx
import React, { useState, useEffect } from 'react';
import AV from 'leancloud-storage';
import { format, eachDayOfInterval, startOfYear, endOfYear, isSameDay } from 'date-fns';
import { Heart, Download, Flame, Calendar as CalendarIcon, TrendingUp } from 'lucide-react';
import html2canvas from 'html2canvas';
import jsPDF from 'jspdf';

// åˆå§‹åŒ– LeanCloud
AV.init({
  appId: "fXnYOxrBJqYINPMyp49sG3Sh-gzGzoHsz",
  appKey: "4VGgTvlU2vWsdjK4QxM9ArcB",
  serverURL: "https://fxnyoxrb.lc-cn-n1-shared.com"
});

function App() {
  const [records, setRecords] = useState([]);
  const [isSyncing, setIsSyncing] = useState(false);

  // 1. è‡ªåŠ¨åŒæ­¥é€»è¾‘ï¼šæ¯ 30 ç§’æ‹‰å–ä¸€æ¬¡æœ€æ–°æ•°æ®ï¼Œç¡®ä¿ä¸¤äººçœ‹åˆ°çš„ä¸€è‡´
  useEffect(() => {
    fetchData();
    const timer = setInterval(fetchData, 30000); 
    return () => clearInterval(timer);
  }, []);

  const fetchData = async () => {
    setIsSyncing(true);
    const query = new AV.Query('LoveRecord');
    query.descending('createdAt');
    query.limit(1000);
    try {
      const results = await query.find();
      setRecords(results.map(r => ({
        id: r.id,
        date: new Date(r.get('date')),
        rating: r.get('rating')
      })));
    } catch (err) {
      console.error("æ•°æ®åŠ è½½å¤±è´¥", err);
    }
    setIsSyncing(false);
  };

  // 2. äº¤äº’é€»è¾‘ï¼šç‚¹å‡»æ—¥æœŸæˆ–å¿«é€Ÿè®°å½•
  const addRecord = async (score) => {
    const LoveRecord = AV.Object.extend('LoveRecord');
    const record = new LoveRecord();
    record.set('date', new Date());
    record.set('rating', score);
    await record.save();
    fetchData();
  };

  // 3. è®¡ç®—çƒ­åŠ›å›¾é¢œè‰² (Win11 é£æ ¼ï¼šæµ…ç²‰åˆ°æ·±ç´«çº¢)
  const getCellColor = (date) => {
    const count = records.filter(r => isSameDay(r.date, date)).length;
    if (count === 0) return 'bg-white/30 border-white/20';
    if (count === 1) return 'bg-pink-200 border-pink-300';
    if (count === 2) return 'bg-pink-400 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.3)]';
    return 'bg-gradient-to-br from-pink-600 to-purple-600 border-pink-700 shadow-lg';
  };

  return (
    <div className="min-h-screen bg-[#f3f3f3] bg-[url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2000')] bg-cover bg-fixed p-4 md:p-10">
      {/* å…¨å±€æ¯›ç»ç’ƒå®¹å™¨ */}
      <div id="capture-area" className="max-w-6xl mx-auto bg-white/60 backdrop-blur-2xl rounded-3xl shadow-[0_32px_64px_-12px_rgba(0,0,0,0.1)] border border-white/40 overflow-hidden">
        
        {/* é¡¶éƒ¨çŠ¶æ€æ  */}
        <div className="px-8 py-6 flex justify-between items-center border-b border-white/20">
          <div>
            <h1 className="text-3xl font-black bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-3">
              <Heart className="fill-pink-500 text-pink-500" /> çˆ±è®¡æ•°
            </h1>
            <p className="text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold">Record every sweet moment</p>
          </div>
          <div className="flex gap-3">
             <button onClick={fetchData} className={`p-2 rounded-full bg-white/50 hover:bg-white transition ${isSyncing ? 'animate-spin' : ''}`}>
               <TrendingUp size={20} className="text-slate-600"/>
             </button>
             <button onClick={() => {/* å¯¼å‡ºå‡½æ•° */}} className="px-5 py-2 bg-pink-600 text-white rounded-full font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition active:scale-95">
               å¯¼å‡ºæŠ¥å‘Š
             </button>
          </div>
        </div>

        <div className="flex flex-col md:flex-row">
          {/* å·¦ä¾§ï¼šå¯è§†åŒ–çœ‹æ¿ */}
          <div className="flex-1 p-8 space-y-8">
            <div className="grid grid-cols-3 gap-4">
              <StatCard label="ç´¯è®¡æ¬¡æ•°" value={records.length} icon={<Flame className="text-orange-500"/>} color="bg-orange-50"/>
              <StatCard label="æœ¬å‘¨é¢‘ç‡" value={calculateWeekly(records)} icon={<CalendarIcon className="text-blue-500"/>} color="bg-blue-50"/>
              <StatCard label="å¹¸ç¦æŒ‡æ•°" value={avgRating(records)} icon={<Star className="text-yellow-500"/>} color="bg-yellow-50"/>
            </div>

            {/* å¹´åº¦çƒ­åŠ›å›¾åŒºåŸŸ */}
            <div className="bg-white/40 p-6 rounded-2xl border border-white/50">
               <h3 className="mb-4 font-bold text-slate-700">2024 ç”œèœœè½¨è¿¹</h3>
               <div className="grid grid-flow-col grid-rows-7 gap-1 overflow-x-auto pb-4">
                 {/* è¿™é‡Œç”Ÿæˆä¸€æ•´å¹´çš„æ ¼å­ */}
                 {generateYearGrid(records)}
               </div>
            </div>
          </div>

          {/* å³ä¾§ï¼šå¿«é€Ÿäº¤äº’é¢æ¿ */}
          <div className="w-full md:w-80 bg-white/30 backdrop-blur-sm p-8 border-l border-white/20">
            <h3 className="font-bold mb-6 text-slate-700">æ–°çš„ä¸€æ¬¡ï¼Ÿ</h3>
            <div className="space-y-4">
              {[5, 4, 3, 2, 1].map(score => (
                <button 
                  key={score}
                  onClick={() => addRecord(score)}
                  className="w-full group flex items-center justify-between p-4 bg-white/50 hover:bg-pink-500 hover:text-white rounded-2xl border border-white transition-all duration-300"
                >
                  <span className="font-bold">{score} æ˜Ÿä½“éªŒ</span>
                  <Heart size={16} className="opacity-0 group-hover:opacity-100 transition-opacity fill-current"/>
                </button>
              ))}
            </div>
            <div className="mt-10 p-4 bg-pink-100/50 rounded-2xl border border-pink-200">
               <p className="text-xs text-pink-700 leading-relaxed italic">
                 "çˆ±ä¸ä»…æ˜¯èº«ä½“çš„å¥‘åˆï¼Œæ›´æ˜¯çµé­‚çš„å…±é¸£ã€‚"
               </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// è¾…åŠ©ç»„ä»¶ï¼šç»Ÿè®¡å¡ç‰‡
function StatCard({ label, value, icon, color }) {
  return (
    <div className={`${color} p-4 rounded-2xl border border-white shadow-sm`}>
      <div className="flex justify-between items-start mb-2">
        <span className="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">{label}</span>
        {icon}
      </div>
      <div className="text-2xl font-black text-slate-800">{value}</div>
    </div>
  );
}

// è¾…åŠ©é€»è¾‘... (å¦‚ calculateWeekly, generateYearGrid ç­‰)

```

---

### 4. å…³é”®å¼€å‘ç»†èŠ‚è¯´æ˜

#### âš¡ï¸ äºšå…‹åŠ›é«˜çº§ UI (Tailwind é…ç½®)

ä¸ºäº†å®ç° Windows 11 çš„è´¨æ„Ÿï¼Œåœ¨ `tailwind.config.js` ä¸­å»ºè®®åŠ å…¥è‡ªå®šä¹‰é˜´å½±ï¼š

```javascript
theme: {
  extend: {
    backdropBlur: {
      xs: '2px',
    },
    boxShadow: {
      'win11': '0 8px 32px 0 rgba(31, 38, 135, 0.07)',
    }
  }
}

```

#### ğŸ“Š çƒ­åŠ›å›¾ç”Ÿæˆé€»è¾‘

åœ¨ GitHub Pages ä¸Šï¼Œæ¨ªå‘æ’åˆ—çš„â€œå¹´åº¦çƒ­åŠ›å›¾â€æœ€ç›´è§‚ã€‚ä½¿ç”¨ `date-fns` çš„ `eachDayOfInterval` é…åˆ `grid-flow-col`ï¼Œå¯ä»¥å®Œç¾å¤ç° GitHub è´¡çŒ®å›¾ã€‚

#### ğŸ“„ PDF å¯¼å‡ºå¢å¼º

ä¸ºäº†è®©å¯¼å‡ºçš„ PDF å¥½çœ‹ï¼Œä½ å¯ä»¥ä¸“é—¨å†™ä¸€ä¸ªéšè—çš„ `ReportTemplate` ç»„ä»¶ï¼Œå½“ç‚¹å‡»å¯¼å‡ºæŒ‰é’®æ—¶ï¼š

1. ä½¿ç”¨ `html2canvas` æ¸²æŸ“è¿™ä¸ªéšè—ç»„ä»¶ã€‚
2. æŠ¥è¡¨å†…åŒ…å«ï¼š**ä½ ä»¬åœ¨ä¸€èµ·çš„æ€»å¤©æ•°**ã€**æœ€é¢‘ç¹çš„ä¸€å‘¨**ã€**äº”æ˜Ÿå¥½è¯„çš„å æ¯”é¥¼å›¾**ã€‚

#### ğŸ”„ å¤šè®¾å¤‡åŒæ­¥æµç¨‹

* **åœºæ™¯**ï¼šä½ åœ¨å¤–é¢è®°å½•äº†ä¸€æ¬¡ï¼Œä½ å¥³æœ‹å‹åœ¨å®¶æ‰“å¼€ç”µè„‘ã€‚
* **å®ç°**ï¼šç”±äº `useEffect` ä¸­è®¾ç½®äº† `setInterval`ï¼Œå¥¹ä¸éœ€è¦åˆ·æ–°é¡µé¢ï¼Œé¡µé¢ä¸Šçš„â€œç´¯è®¡æ¬¡æ•°â€å’Œâ€œæ—¥å†æ ¼å­â€ä¼šè‡ªåŠ¨å˜çº¢/åŠ æ·±ã€‚

---

### 5. éƒ¨ç½²åˆ° GitHub Pages (3åˆ†é’Ÿæå®š)

1. **å®‰è£…éƒ¨ç½²å·¥å…·**: `npm install gh-pages --save-dev`
2. **ä¿®æ”¹ package.json**:
```json
"scripts": {
  "predeploy": "npm run build",
  "deploy": "gh-pages -d dist"
}

```


3. **è¿è¡Œå‘å¸ƒ**: `npm run deploy`
4. **æœ€ç»ˆåœ°å€**: `https://<ä½ çš„githubç”¨æˆ·å>.github.io/love-counter/`

### ğŸŒˆ å»ºè®®çš„ä¸‹ä¸€æ­¥ï¼š

æ—¢ç„¶è¦ UI å¥½çœ‹ï¼Œ ä½ å¯ä»¥åœ¨åº”ç”¨é¡¶éƒ¨æ”¾ä¸€å¼ ä½ ä»¬çš„åˆç…§ä½œä¸ºåŠé€æ˜èƒŒæ™¯ã€‚